<view class="container">
    <!-- 学年选择器 -->
    <view class="picker-wrapper">
        <picker bindchange="bindYearChange" value="{{selectedYearIndex}}" range="{{rangeYears}}">
            <view class="picker-item">选择学年: {{years[selectedYearIndex]}}</view>
        </picker>
    </view>

    <!-- 学期选择器 -->
    <view class="picker-wrapper">
        <picker bindchange="bindSemesterChange" value="{{selectedSemesterIndex}}" range="{{rangeSemesters}}">
            <view class="picker-item">选择学期: {{semesters[selectedSemesterIndex]}}</view>
        </picker>
    </view>

    <!-- 专业选择器 -->
    <view class="picker-wrapper">
        <picker bindchange="bindMajorChange" value="{{selectedMajorIndex}}" range="{{rangeMajors}}">
            <view class="picker-item">选择专业: {{majors[selectedMajorIndex]}}</view>
        </picker>
    </view>

    <!-- 确定按钮 -->
    <button bindtap="showCourses">查询课程</button>

    <!-- 课程列表 -->
    <view wx:if="{{showCourses}}" class="courses-list">
        <block wx:for="{{teachingCourses}}" wx:key="id">
            <view class="course-item" data-index="{{index}}" bindtap="showEvaluationResult">
                <view class="course-info">
                    <text>课程: {{item.course}}</text>
                    <text>评分: {{item.score}}分</text>
                </view>
                <button wx:if="{{item.score!== 0}}">查看评教结果</button>
            </view>
        </block>

        <!-- 恶意评分提示 -->
        <view wx:if="{{showMaliciousScorePrompt}}" class="malicious-score-prompt">
            在以上课程中检测到{{maliciousScoreCount}}条恶意评分，是否需要删除？
        </view>

        <!-- 恶意评分列表 -->
        <view wx:if="{{showMaliciousScorePrompt}}" class="malicious-scores-list">
            <block wx:for="{{maliciousScores}}" wx:key="id">
                <view class="course-item" data-index="{{index}}">
                    <view class="course-info">
                        <text>课程: {{item.course}}</text>
                        <text>评分: {{item.score}}分</text>
                    </view>
                    <button bindtap="deleteMaliciousScore" data-index="{{index}}" style="background-color: red; color: white;">删除</button>
                </view>
            </block>
        </view>
    </view>

    <!-- 评教结果 -->
    <view wx:if="{{showEvaluationResult}}" class="evaluation-result">
        <view class="result-text">{{evaluationResult.text}}</view>
        <view class="result-score">评分: {{evaluationResult.score}}分</view>
    </view>
</view>